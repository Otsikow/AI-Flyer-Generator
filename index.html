<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3G Design Generator</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M49.9992 8.33301C42.4435 8.33301 35.111 11.2289 29.7042 16.3216C24.2974 21.4144 21.0515 28.3186 20.4442 35.633H33.3325V44.4997H19.5358C19.1775 47.243 19.1775 50.0897 19.5358 52.833H33.3325V61.6997H20.4442C21.0515 69.0142 24.2974 75.9183 29.7042 81.0111C35.111 86.1038 42.4435 88.9997 49.9992 88.9997C57.5548 88.9997 64.8873 86.1038 70.2942 81.0111C75.701 75.9183 78.9468 69.0142 79.5542 61.6997H66.6658V52.833H80.4625C80.8208 50.0897 80.8208 47.243 80.4625 44.4997H66.6658V35.633H79.5542C78.9468 28.3186 75.701 21.4144 70.2942 16.3216C64.8873 11.2289 57.5548 8.33301 49.9992 8.33301Z' fill='%238D2A49'/%3E%3C/svg%3E">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.css" />
    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0"
      }
    }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.js"></script>
    <script type="module" src="index.tsx"></script>
</head>
<body>
    <div class="background-gradient"></div>
    <div id="app">
        <header class="app-header">
            <svg id="app-logo" width="50" height="50" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M49.9992 8.33301C42.4435 8.33301 35.111 11.2289 29.7042 16.3216C24.2974 21.4144 21.0515 28.3186 20.4442 35.633H33.3325V44.4997H19.5358C19.1775 47.243 19.1775 50.0897 19.5358 52.833H33.3325V61.6997H20.4442C21.0515 69.0142 24.2974 75.9183 29.7042 81.0111C35.111 86.1038 42.4435 88.9997 49.9992 88.9997C57.5548 88.9997 64.8873 86.1038 70.2942 81.0111C75.701 75.9183 78.9468 69.0142 79.5542 61.6997H66.6658V52.833H80.4625C80.8208 50.0897 80.8208 47.243 80.4625 44.4997H66.6658V35.633H79.5542C78.9468 28.3186 75.701 21.4144 70.2942 16.3216C64.8873 11.2289 57.5548 8.33301 49.9992 8.33301Z" fill="currentColor"/>
            </svg>
            <div class="header-content">
                <h1>3G Design Generator</h1>
                <p>Generate and edit photos, create designs, and manage social media content with AI.</p>
            </div>
            <div class="header-actions">
                <div id="auth-controls">
                    <button id="login-btn" class="btn btn-secondary">Login</button>
                    <div id="user-display" class="hidden">
                        <span id="user-name"></span>
                        <span id="user-verification-notice" class="hidden"></span>
                        <button id="manage-users-btn" class="btn btn-secondary hidden">Manage Users</button>
                        <button id="logout-btn" class="btn btn-secondary">Logout</button>
                    </div>
                </div>
                <button id="theme-switcher" class="theme-switcher" aria-label="Toggle light/dark theme">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                </button>
            </div>
        </header>

        <nav class="app-tabs">
            <button id="tab-design-generator" class="tab-btn active" role="tab" aria-selected="true" aria-controls="design-generator-page">Design Generator</button>
            <button id="tab-image-studio" class="tab-btn" role="tab" aria-selected="false" aria-controls="image-studio-page">Image Studio</button>
            <button id="tab-social-manager" class="tab-btn" role="tab" aria-selected="false" aria-controls="social-media-manager-page">Social Media Manager</button>
        </nav>

        <main>
            <div id="design-generator-page" class="tab-content active" role="tabpanel" aria-labelledby="tab-design-generator">
                <div class="generator-container">
                    <section class="input-panel">
                        <div class="preferences-bar">
                            <h3>Preferences</h3>
                            <div id="design-save-indicator" class="auto-save-indicator" aria-live="polite"></div>
                            <div class="pref-buttons">
                                <button id="clear-prefs-btn" class="btn btn-secondary">Clear</button>
                            </div>
                        </div>

                        <h2 id="description-header">1. Describe Your Design</h2>
                        <div class="input-container">
                            <textarea id="prompt-input" rows="4" placeholder="e.g., A modern tech conference flyer with a blue and white color scheme..."></textarea>
                            <div class="input-actions">
                                <button id="mic-design-btn" class="btn-icon" aria-label="Use Voice to Describe" title="Use Voice">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                                </button>
                                <button id="enhance-prompt-btn" class="btn-icon" aria-label="Enhance with AI" title="Enhance with AI" disabled>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3L9.5 9.5 3 12l6.5 2.5L12 21l2.5-6.5L21 12l-6.5-2.5L12 3z"/></svg>
                                </button>
                            </div>
                        </div>

                        <h2>2. Company Name</h2>
                        <input type="text" id="company-name-input" placeholder="e.g., TaskHaven">

                        <h2>3. Contact Details</h2>
                        <textarea id="contact-details-input" rows="3" placeholder="e.g., www.taskhaven.app, (555) 123-4567"></textarea>

                        <h2>4. Upload Your Logo</h2>
                        <div id="image-upload-area" role="button" aria-label="Upload your logo" tabindex="0">
                            <button id="remove-logo-btn" class="hidden" aria-label="Remove logo">&times;</button>
                            <input type="file" id="logo-upload" accept="image/*" class="hidden">
                            <img id="logo-preview" class="hidden" alt="Uploaded logo preview" loading="lazy" decoding="async">
                            <div id="upload-placeholder">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
                                <p>Click to upload or drag & drop</p>
                                <span>SVG, PNG, JPG</span>
                            </div>
                        </div>

                        <div id="logo-customization" class="hidden">
                            <h3 class="customization-subheader">Logo Size</h3>
                            <div class="logo-size-options-container" role="radiogroup">
                                <div class="logo-size-option" data-size="small" role="radio" aria-checked="false" tabindex="0"><span>Small</span></div>
                                <div class="logo-size-option selected" data-size="medium" role="radio" aria-checked="true" tabindex="0"><span>Medium</span></div>
                                <div class="logo-size-option" data-size="large" role="radio" aria-checked="false" tabindex="0"><span>Large</span></div>
                            </div>
                            
                            <h3 class="customization-subheader">Logo Position</h3>
                            <div class="logo-position-options-container" role="radiogroup">
                                <div class="logo-position-option" data-position="top-left" role="radio" aria-checked="false" tabindex="0" aria-label="Top Left"><div class="position-indicator"></div></div>
                                <div class="logo-position-option" data-position="top-center" role="radio" aria-checked="false" tabindex="0" aria-label="Top Center"><div class="position-indicator"></div></div>
                                <div class="logo-position-option selected" data-position="top-right" role="radio" aria-checked="true" tabindex="0" aria-label="Top Right"><div class="position-indicator"></div></div>
                                <div class="logo-position-option" data-position="middle-left" role="radio" aria-checked="false" tabindex="0" aria-label="Middle Left"><div class="position-indicator"></div></div>
                                <div class="logo-position-option" data-position="middle-center" role="radio" aria-checked="false" tabindex="0" aria-label="Middle Center"><div class="position-indicator"></div></div>
                                <div class="logo-position-option" data-position="middle-right" role="radio" aria-checked="false" tabindex="0" aria-label="Middle Right"><div class="position-indicator"></div></div>
                                <div class="logo-position-option" data-position="bottom-left" role="radio" aria-checked="false" tabindex="0" aria-label="Bottom Left"><div class="position-indicator"></div></div>
                                <div class="logo-position-option" data-position="bottom-center" role="radio" aria-checked="false" tabindex="0" aria-label="Bottom Center"><div class="position-indicator"></div></div>
                                <div class="logo-position-option" data-position="bottom-right" role="radio" aria-checked="false" tabindex="0" aria-label="Bottom Right"><div class="position-indicator"></div></div>
                            </div>
                        </div>
                        
                        <h2>5. Color & Background</h2>
                         <h3 class="customization-subheader">Palettes</h3>
                        <div class="palette-options-container" role="radiogroup" aria-labelledby="palette-heading">
                            <div class="palette-option selected" data-palette-name="default" role="radio" aria-checked="true" tabindex="0">
                                <span>Default</span>
                            </div>
                            <div class="palette-option" data-palette-name="Spring" data-palette-colors="#a8d8ea, #d4a5a5, #ffc1a6, #a2b29f, #f7cac9" role="radio" aria-checked="false" tabindex="0">
                                <div class="palette-swatches">
                                    <div class="swatch" style="background-color: #a8d8ea;"></div>
                                    <div class="swatch" style="background-color: #d4a5a5;"></div>
                                    <div class="swatch" style="background-color: #ffc1a6;"></div>
                                    <div class="swatch" style="background-color: #a2b29f;"></div>
                                    <div class="swatch" style="background-color: #f7cac9;"></div>
                                </div>
                                <span>Spring</span>
                            </div>
                            <div class="palette-option" data-palette-name="Oceanic" data-palette-colors="#003b46, #07575b, #66a5ad, #c4dfe6, #ffffff" role="radio" aria-checked="false" tabindex="0">
                                <div class="palette-swatches">
                                    <div class="swatch" style="background-color: #003b46;"></div>
                                    <div class="swatch" style="background-color: #07575b;"></div>
                                    <div class="swatch" style="background-color: #66a5ad;"></div>
                                    <div class="swatch" style="background-color: #c4dfe6;"></div>
                                    <div class="swatch" style="background-color: #ffffff;"></div>
                                </div>
                                <span>Oceanic</span>
                            </div>
                            <div class="palette-option" data-palette-name="Monochrome" data-palette-colors="#1c1c1c, #3d3d3d, #6b6b6b, #aaaaaa, #e0e0e0" role="radio" aria-checked="false" tabindex="0">
                                <div class="palette-swatches">
                                    <div class="swatch" style="background-color: #1c1c1c;"></div>
                                    <div class="swatch" style="background-color: #3d3d3d;"></div>
                                    <div class="swatch" style="background-color: #6b6b6b;"></div>
                                    <div class="swatch" style="background-color: #aaaaaa;"></div>
                                    <div class="swatch" style="background-color: #e0e0e0;"></div>
                                </div>
                                <span>Monochrome</span>
                            </div>
                             <div class="palette-option" data-palette-name="Sunset" data-palette-colors="#f67280, #c06c84, #6c5b7b, #355c7d, #f8b195" role="radio" aria-checked="false" tabindex="0">
                                <div class="palette-swatches">
                                    <div class="swatch" style="background-color: #f67280;"></div>
                                    <div class="swatch" style="background-color: #c06c84;"></div>
                                    <div class="swatch" style="background-color: #6c5b7b;"></div>
                                    <div class="swatch" style="background-color: #355c7d;"></div>
                                    <div class="swatch" style="background-color: #f8b195;"></div>
                                </div>
                                <span>Sunset</span>
                            </div>
                             <div class="palette-option" data-palette-name="Vibrant" data-palette-colors="#00b8a9, #f6416c, #ffde7d, #247ba0, #ffffff" role="radio" aria-checked="false" tabindex="0">
                                <div class="palette-swatches">
                                    <div class="swatch" style="background-color: #00b8a9;"></div>
                                    <div class="swatch" style="background-color: #f6416c;"></div>
                                    <div class="swatch" style="background-color: #ffde7d;"></div>
                                    <div class="swatch" style="background-color: #247ba0;"></div>
                                    <div class="swatch" style="background-color: #ffffff;"></div>
                                </div>
                                <span>Vibrant</span>
                            </div>
                        </div>

                        <h3 class="customization-subheader customization-subheader--spaced">Solid Background</h3>
                        <div class="options-grid" role="radiogroup">
                            <div class="background-option selected" data-bg-type="none" data-bg-value="none" role="radio" aria-checked="true" tabindex="0">
                                <span>None</span>
                            </div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#ffffff" style="background-color: #ffffff;" role="radio" aria-checked="false" tabindex="0" aria-label="White"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#f0f0f0" style="background-color: #f0f0f0;" role="radio" aria-checked="false" tabindex="0" aria-label="Light Gray"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#2c2c2c" style="background-color: #2c2c2c;" role="radio" aria-checked="false" tabindex="0" aria-label="Dark Gray"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#fefae0" style="background-color: #fefae0;" role="radio" aria-checked="false" tabindex="0" aria-label="Cream"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#e6f2ff" style="background-color: #e6f2ff;" role="radio" aria-checked="false" tabindex="0" aria-label="Light Blue"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#ffe6e6" style="background-color: #ffe6e6;" role="radio" aria-checked="false" tabindex="0" aria-label="Light Pink"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#fff9c4" style="background-color: #fff9c4;" role="radio" aria-checked="false" tabindex="0" aria-label="Soft Yellow"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#d0f4de" style="background-color: #d0f4de;" role="radio" aria-checked="false" tabindex="0" aria-label="Mint Green"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#e1d5e7" style="background-color: #e1d5e7;" role="radio" aria-checked="false" tabindex="0" aria-label="Lavender"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#ffdac1" style="background-color: #ffdac1;" role="radio" aria-checked="false" tabindex="0" aria-label="Peach"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#b2dfdb" style="background-color: #b2dfdb;" role="radio" aria-checked="false" tabindex="0" aria-label="Light Teal"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#001d3d" style="background-color: #001d3d;" role="radio" aria-checked="false" tabindex="0" aria-label="Navy"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#0077b6" style="background-color: #0077b6;" role="radio" aria-checked="false" tabindex="0" aria-label="Dark Blue"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#2d6a4f" style="background-color: #2d6a4f;" role="radio" aria-checked="false" tabindex="0" aria-label="Forest Green"></div>
                            <div class="background-option color-option" data-bg-type="color" data-bg-value="#800020" style="background-color: #800020;" role="radio" aria-checked="false" tabindex="0" aria-label="Burgundy"></div>
                        </div>
                        
                        <h2>6. Layout & Style</h2>
                        <!-- Layout Options -->
                        <div class="layout-options-container" role="radiogroup" aria-labelledby="layout-heading">
                            <div class="layout-option" data-layout="text-focus" role="radio" aria-checked="false" tabindex="0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><line x1="7" y1="8" x2="17" y2="8"/><line x1="7" y1="12" x2="17" y2="12"/><line x1="7" y1="16" x2="12" y2="16"/></svg>
                                <span>Text Focus</span>
                            </div>
                            <div class="layout-option selected" data-layout="balanced" role="radio" aria-checked="true" tabindex="0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><rect x="7" y="7" width="10" height="5" rx="1"/><line x1="7" y1="16" x2="17" y2="16"/><line x1="7" y1="4" x2="17" y2="14"/></svg>
                                <span>Balanced</span>
                            </div>
                            <div class="layout-option" data-layout="image-focus" role="radio" aria-checked="false" tabindex="0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                                <span>Image Focus</span>
                            </div>
                        </div>

                        <!-- Font Options -->
                        <div class="font-options-container" role="radiogroup" aria-labelledby="font-heading">
                            <div class="font-option selected" data-font="sans-serif" role="radio" aria-checked="true" tabindex="0"><span style="font-family: sans-serif;">Sans-serif</span></div>
                            <div class="font-option" data-font="serif" role="radio" aria-checked="false" tabindex="0"><span style="font-family: serif;">Serif</span></div>
                            <div class="font-option" data-font="script" role="radio" aria-checked="false" tabindex="0"><span style="font-family: cursive;">Script</span></div>
                            <div class="font-option" data-font="modern" role="radio" aria-checked="false" tabindex="0"><span style="font-family: 'Arial Black', sans-serif;">Modern</span></div>
                            <div class="font-option" data-font="classic" role="radio" aria-checked="false" tabindex="0"><span style="font-family: 'Times New Roman', Times, serif;">Classic</span></div>
                            <div class="font-option" data-font="futuristic" role="radio" aria-checked="false" tabindex="0"><span style="font-family: 'Courier New', Courier, monospace;">Futuristic</span></div>
                        </div>
                        
                        <!-- Size Options -->
                        <div class="size-options-container" role="radiogroup" aria-labelledby="size-heading">
                            <div class="size-option selected" data-size="a4-portrait" role="radio" aria-checked="true" tabindex="0"><span>A4 Portrait</span></div>
                            <div class="size-option" data-size="a4-landscape" role="radio"aria-checked="false" tabindex="0"><span>A4 Landscape</span></div>
                            <div class="size-option" data-size="us-letter" role="radio" aria-checked="false" tabindex="0"><span>US Letter</span></div>
                            <div class="size-option" data-size="us-letter-landscape" role="radio"aria-checked="false" tabindex="0"><span>US Letter Landscape</span></div>
                            <div class="size-option" data-size="square-post" role="radio"aria-checked="false" tabindex="0"><span>Square Post</span></div>
                            <div class="size-option" data-size="social-banner" role="radio"aria-checked="false" tabindex="0"><span>Social Banner</span></div>
                            <div class="size-option" data-size="logo" role="radio"aria-checked="false" tabindex="0"><span>Logo</span></div>
                        </div>

                        <h2>7. Text Effects</h2>
                        <div class="text-effects-container">
                            <div class="text-effect-option" data-effect="bold" role="checkbox" aria-checked="false" tabindex="0">
                                <span style="font-weight: bold;">Bold</span>
                            </div>
                            <div class="text-effect-option" data-effect="italic" role="checkbox" aria-checked="false" tabindex="0">
                                <span style="font-style: italic;">Italic</span>
                            </div>
                            <div class="text-effect-option" data-effect="underline" role="checkbox" aria-checked="false" tabindex="0">
                                <span style="text-decoration: underline;">Underline</span>
                            </div>
                        </div>

                        <button id="generate-btn" class="btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.9 1.9a2.5 2.5 0 0 0 0 3.5L12 10l1.9-1.9a2.5 2.5 0 0 0 0-3.5L12 3z"/><path d="m3 12 1.9 1.9a2.5 2.5 0 0 0 3.5 0L10 12l-1.9-1.9a2.5 2.5 0 0 0-3.5 0L3 12z"/><path d="m12 21 1.9-1.9a2.5 2.5 0 0 0 0-3.5L12 14l-1.9 1.9a2.5 2.5 0 0 0 0 3.5L12 21z"/><path d="M21 12 19.1 10.1a2.5 2.5 0 0 0-3.5 0L14 12l1.9 1.9a2.se's prompt 2.5 0 0 0 3.5 0L21 12z"/></svg>
                            <span>Generate Design</span>
                        </button>
                    </section>

                    <section class="output-panel">
                        <div id="output-placeholder">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.9 1.9a2.5 2.5 0 0 0 0 3.5L12 10l1.9-1.9a2.5 2.5 0 0 0 0-3.5L12 3z"/><path d="m3 12 1.9 1.9a2.5 2.5 0 0 0 3.5 0L10 12l-1.9-1.9a2.5 2.5 0 0 0-3.5 0L3 12z"/><path d="m12 21 1.9-1.9a2.5 2.5 0 0 0 0-3.5L12 14l-1.9 1.9a2.5 2.5 0 0 0 0 3.5L12 21z"/><path d="M21 12 19.1 10.1a2.5 2.5 0 0 0-3.5 0L14 12l1.9 1.9a2.5 2.5 0 0 0 3.5 0L21 12z"/></svg>
                            <h3>Your design will appear here</h3>
                            <p>Fill out the details on the left and click "Generate" to get started.</p>
                        </div>

                        <div id="loader" class="hidden">
                            <div class="loading-spinner"></div>
                            <p id="loader-text">Generating...</p>
                        </div>

                        <div id="result-container" class="hidden">
                            <img id="flyer-output" alt="Generated design" loading="lazy" decoding="async">
                            <div class="download-controls hidden">
                                 <select id="format-select" class="format-select">
                                    <option value="png">PNG</option>
                                    <option value="jpg">JPG</option>
                                </select>
                                <button id="download-btn" class="btn">Download</button>
                                <button id="share-btn" class="btn btn-secondary">Share</button>
                            </div>
                        </div>
                        
                        <div id="error-message" class="error-message hidden" aria-live="polite"></div>
                    </section>
                </div>
            </div>
            
            <div id="image-studio-page" class="tab-content hidden" role="tabpanel" aria-labelledby="tab-image-studio">
                <div class="generator-container">
                    <section class="input-panel">
                        <div class="studio-tabs-container">
                             <div class="studio-tabs">
                                <button id="studio-tab-edit" class="studio-tab-btn" role="tab" aria-selected="false" aria-controls="studio-edit-panel">Edit</button>
                                <button id="studio-tab-generate" class="studio-tab-btn active" role="tab" aria-selected="true" aria-controls="studio-generate-panel">Generate</button>
                            </div>
                            <div id="studio-save-indicator" class="auto-save-indicator" aria-live="polite"></div>
                        </div>
            
                        <div id="studio-edit-panel" class="studio-panel" role="tabpanel" aria-labelledby="studio-tab-edit">
                            <h2>Upload & Adjust</h2>
                            <div id="studio-image-upload-area" role="button" aria-label="Upload your image(s)" tabindex="0">
                                <input type="file" id="studio-logo-upload" accept="image/*" class="hidden" multiple>
                                <div id="studio-upload-placeholder">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></svg>
                                    <p>Click to upload or drag & drop</p>
                                    <span>Upload Image(s) - JPG, PNG, WEBP</span>
                                </div>
                            </div>
                            
                            <div id="uploaded-images-container" class="hidden">
                                <h2>Uploaded Images</h2>
                                <div id="uploaded-images-list"></div>
                            </div>

                            <div id="merge-controls" class="hidden">
                                <h2>Merge Images</h2>
                                <textarea id="merge-prompt-input" rows="2" placeholder="Describe how to merge the images... e.g., 'Combine these into a single landscape, putting the cat on the far left.'"></textarea>
                                <button id="merge-images-btn" class="btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3L9.5 9.5 3 12l6.5 2.5L12 21l2.5-6.5L21 12l-6.5-2.5L12 3z"/></svg>
                                    <span>Merge All Images</span>
                                </button>
                            </div>
                            
                            <div class="adjustment-controls hidden">
                                <div id="ai-edit-section" class="hidden">
                                    <h2>AI Edit</h2>
                                    <div class="input-container">
                                        <textarea id="ai-edit-prompt-input" rows="3" placeholder="e.g., Replace the background with a beach..."></textarea>
                                        <div class="input-actions">
                                            <button id="mic-ai-edit-btn" class="btn-icon" aria-label="Use Voice to Describe" title="Use Voice">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                                            </button>
                                            <button id="enhance-ai-edit-btn" class="btn-icon" aria-label="Enhance with AI" title="Enhance with AI" disabled>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3L9.5 9.5 3 12l6.5 2.5L12 21l2.5-6.5L21 12l-6.5-2.5L12 3z"/></svg>
                                            </button>
                                        </div>
                                    </div>
                                    <button id="apply-ai-edit-btn" class="btn">Apply Edit</button>
                                </div>

                                <div class="panel-header">
                                    <h2>Adjustments</h2>
                                    <button id="reset-filters-btn" class="btn btn-secondary">Reset</button>
                                </div>
                                <div class="slider-group">
                                    <label for="brightness-slider">Brightness</label>
                                    <input type="range" id="brightness-slider" min="0" max="200" value="100">
                                </div>
                                <div class="slider-group">
                                    <label for="contrast-slider">Contrast</label>
                                    <input type="range" id="contrast-slider" min="0" max="200" value="100">
                                </div>
                                <div class="slider-group">
                                    <label for="saturate-slider">Saturation</label>
                                    <input type="range" id="saturate-slider" min="0" max="200" value="100">
                                </div>
                                <div class="slider-group">
                                    <label for="blur-slider">Blur</label>
                                    <input type="range" id="blur-slider" min="0" max="10" value="0" step="0.1">
                                </div>

                                <h2>Text Overlay</h2>
                                <div class="text-controls-container">
                                    <textarea id="text-overlay-input" rows="2" placeholder="Add text to your image..."></textarea>
                                    <div id="text-style-panel" class="hidden">
                                        <h3 class="customization-subheader">Text Styles</h3>
                                        <div class="control-grid">
                                            <div class="control-item">
                                                <label for="font-family-select">Font Family</label>
                                                <select id="font-family-select" class="format-select">
                                                    <option value="Arial, sans-serif">Arial</option>
                                                    <option value="Verdana, sans-serif">Verdana</option>
                                                    <option value="Georgia, serif">Georgia</option>
                                                    <option value="'Times New Roman', serif">Times New Roman</option>
                                                    <option value="'Courier New', monospace">Courier New</option>
                                                    <option value="Impact, sans-serif">Impact</option>
                                                    <option value="cursive">Cursive</option>
                                                    <option value="fantasy">Fantasy</option>
                                                </select>
                                            </div>
                                            <div class="control-item">
                                                <label for="font-size-slider">Font Size</label>
                                                <input type="range" id="font-size-slider" min="8" max="256" value="48">
                                            </div>
                                        </div>
                                        <div class="style-toggles">
                                            <label for="font-color-picker" class="hidden">Font Color</label>
                                            <input type="color" id="font-color-picker" value="#FFFFFF" title="Font Color">
                                            <button id="font-bold-btn" class="style-toggle" aria-pressed="false" title="Bold">B</button>
                                            <button id="font-italic-btn" class="style-toggle" aria-pressed="false" title="Italic">I</button>
                                        </div>
                                        <h3 class="customization-subheader customization-subheader--spaced">Position</h3>
                                        <div id="text-position-grid" class="logo-position-options-container" role="radiogroup">
                                            <div class="logo-position-option" data-position="top-left" role="radio" aria-checked="false" tabindex="0" aria-label="Top Left"><div class="position-indicator"></div></div>
                                            <div class="logo-position-option" data-position="top-center" role="radio" aria-checked="false" tabindex="0" aria-label="Top Center"><div class="position-indicator"></div></div>
                                            <div class="logo-position-option" data-position="top-right" role="radio" aria-checked="false" tabindex="0" aria-label="Top Right"><div class="position-indicator"></div></div>
                                            <div class="logo-position-option" data-position="middle-left" role="radio" aria-checked="false" tabindex="0" aria-label="Middle Left"><div class="position-indicator"></div></div>
                                            <div class="logo-position-option selected" data-position="middle-center" role="radio" aria-checked="true" tabindex="0" aria-label="Middle Center"><div class="position-indicator"></div></div>
                                            <div class="logo-position-option" data-position="middle-right" role="radio" aria-checked="false" tabindex="0" aria-label="Middle Right"><div class="position-indicator"></div></div>
                                            <div class="logo-position-option" data-position="bottom-left" role="radio" aria-checked="false" tabindex="0" aria-label="Bottom Left"><div class="position-indicator"></div></div>
                                            <div class="logo-position-option" data-position="bottom-center" role="radio" aria-checked="false" tabindex="0" aria-label="Bottom Center"><div class="position-indicator"></div></div>
                                            <div class="logo-position-option" data-position="bottom-right" role="radio" aria-checked="false" tabindex="0" aria-label="Bottom Right"><div class="position-indicator"></div></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
            
                        <div id="studio-generate-panel" class="studio-panel active" role="tabpanel" aria-labelledby="studio-tab-generate">
                            <h2>Generate Image</h2>
                            <div class="input-container">
                                <textarea id="image-prompt-input" rows="4" placeholder="e.g., A majestic lion with a glowing mane in a futuristic city..."></textarea>
                                <div class="input-actions">
                                    <button id="mic-generate-image-btn" class="btn-icon" aria-label="Use Voice to Describe" title="Use Voice">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line></svg>
                                    </button>
                                    <button id="enhance-image-prompt-btn" class="btn-icon" aria-label="Enhance with AI" title="Enhance with AI" disabled>
                                         <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3L9.5 9.5 3 12l6.5 2.5L12 21l2.5-6.5L21 12l-6.5-2.5L12 3z"/></svg>
                                    </button>
                                </div>
                            </div>

                            <h2>Style</h2>
                            <div class="style-chips-container">
                                <div class="style-chip" data-style="Photo" role="checkbox" aria-checked="false" tabindex="0">Photo</div>
                                <div class="style-chip" data-style="3D Render" role="checkbox" aria-checked="false" tabindex="0">3D Render</div>
                                <div class="style-chip" data-style="Watercolor" role="checkbox" aria-checked="false" tabindex="0">Watercolor</div>
                                <div class="style-chip" data-style="Flat Illustration" role="checkbox" aria-checked="false" tabindex="0">Flat Illustration</div>
                                <div class="style-chip" data-style="Cinematic" role="checkbox" aria-checked="false" tabindex="0">Cinematic</div>
                                <div class="style-chip" data-style="Portrait" role="checkbox" aria-checked="false" tabindex="0">Portrait</div>
                            </div>
                            
                            <h2>Image Size</h2>
                            <div class="style-chips-container" id="size-preset-chips">
                                <button class="style-chip size-preset-chip selected" data-width="1024" data-height="1024">Square (1:1)</button>
                                <button class="style-chip size-preset-chip" data-width="1344" data-height="768">Banner (16:9)</button>
                                <button class="style-chip size-preset-chip" data-width="1024" data-height="1280">Poster (4:5)</button>
                            </div>
                            <div class="custom-size-container">
                                <div class="custom-dimensions-inputs">
                                    <label>Width (px) <input type="number" id="custom-width-input" min="256" max="2048" value="1024"></label>
                                    <label>Height (px) <input type="number" id="custom-height-input" min="256" max="2048" value="1024"></label>
                                </div>
                                <div id="size-preview-box-container">
                                    <div id="size-preview-box"></div>
                                </div>
                            </div>
                            <div class="aspect-ratio-lock">
                                <label for="aspect-ratio-lock-toggle">
                                    <input type="checkbox" id="aspect-ratio-lock-toggle" checked>
                                    <span class="toggle-switch"></span>
                                    Lock Aspect Ratio
                                </label>
                            </div>

                            <button id="generate-image-btn" class="btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>
                                <span>Generate Image</span>
                            </button>
                        </div>
                    </section>
            
                    <section class="output-panel">
                        <div class="history-controls">
                             <button id="undo-btn" class="btn-icon" aria-label="Undo" title="Undo" disabled>
                                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v6h6"/><path d="M21 12A9 9 0 0 0 6 5.3L3 9"/></svg>
                             </button>
                             <button id="redo-btn" class="btn-icon" aria-label="Redo" title="Redo" disabled>
                                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 3v6h-6"/><path d="M3 12a9 9 0 0 0 15 6.7l3-3.7"/></svg>
                             </button>
                        </div>
                        <div id="studio-output-placeholder">
                            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                            <h3>Your image will appear here</h3>
                            <p>Select an image to start editing or generate a new one.</p>
                        </div>

                        <div id="studio-loader" class="hidden">
                             <div class="loading-spinner"></div>
                            <p id="studio-loader-text">Working on it...</p>
                        </div>
                        
                         <div id="studio-result-container" class="hidden">
                            <div class="canvas-container">
                                <img id="studio-image-output" alt="Studio image output" loading="lazy" decoding="async">
                                <canvas id="studio-text-canvas"></canvas>
                            </div>
                             <div class="studio-download-controls hidden">
                                <select id="studio-format-select" class="format-select">
                                    <option value="png">PNG</option>
                                    <option value="jpg">JPG</option>
                                </select>
                                <button id="studio-download-btn" class="btn">Export Image</button>
                                <button id="studio-share-btn" class="btn btn-secondary">Share</button>
                            </div>
                        </div>

                        <div id="studio-error-message" class="error-message hidden" aria-live="polite"></div>
                    </section>
                </div>
            </div>

            <div id="social-media-manager-page" class="tab-content hidden" role="tabpanel" aria-labelledby="tab-social-manager">
                <div class="generator-container">
                    <section class="input-panel">
                        <div class="panel-header">
                            <h2>1. Business & Topic</h2>
                            <div id="social-save-indicator" class="auto-save-indicator" aria-live="polite"></div>
                        </div>
                        <div class="social-business-selector">
                            <select id="business-select" class="format-select"></select>
                            <button id="manage-businesses-btn" class="btn btn-secondary">Manage</button>
                        </div>
            
                        <div class="input-container">
                            <textarea id="social-topic-input" rows="4" placeholder="Enter post topic or click Brainstorm..."></textarea>
                            <div class="input-actions">
                                <button id="brainstorm-ideas-btn" class="btn-icon" aria-label="Brainstorm Ideas with AI" title="Brainstorm Ideas">
                                     <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>
                                </button>
                            </div>
                        </div>
            
                        <h2>2. Tone of Voice</h2>
                        <select id="social-tone-select" class="format-select">
                            <option>Professional</option>
                            <option>Witty</option>
                            <option>Casual</option>
                            <option>Inspirational</option>
                            <option>Informative</option>
                        </select>
            
                        <h2>3. Platforms</h2>
                        <div id="social-platforms-container" class="style-chips-container">
                            <!-- Platform buttons will be inserted here by JS -->
                        </div>
                        <button id="select-all-platforms-btn" class="btn btn-secondary">Select/Deselect All</button>
                        
                        <div class="action-buttons-container">
                            <button id="generate-social-btn" class="btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
                                <span>Generate Posts</span>
                            </button>
                             <button id="generate-replies-btn" class="btn btn-secondary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                                <span>Generate Replies</span>
                            </button>
                        </div>
                    </section>
            
                    <section class="output-panel">
                        <div class="studio-tabs">
                            <button id="social-tab-create" class="studio-tab-btn active" role="tab" aria-controls="social-create-panel">Create</button>
                            <button id="social-tab-scheduled" class="studio-tab-btn" role="tab" aria-controls="social-scheduled-panel">Scheduled</button>
                        </div>
            
                        <div id="social-create-panel" class="studio-panel active" role="tabpanel" aria-labelledby="social-tab-create">
                            <div id="social-output-placeholder">
                                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>
                                <h3>Generated posts will appear here</h3>
                                <p>Fill out the details on the left and click "Generate Posts".</p>
                            </div>
                             <div id="social-loader" class="hidden">
                                <div class="loading-spinner"></div>
                                <p>Generating content...</p>
                            </div>
                            <div id="social-results-container">
                                <!-- Generated posts will be inserted here -->
                            </div>
                            <div id="social-schedule-controls" class="hidden">
                                <h2>Schedule Posts</h2>
                                <div class="schedule-input-group">
                                    <input type="datetime-local" id="schedule-date-input" class="format-select">
                                    <button id="suggest-time-btn" class="btn-icon" title="Suggest Best Time">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3L9.5 9.5 3 12l6.5 2.5L12 21l2.5-6.5L21 12l-6.5-2.5L12 3z"/></svg>
                                    </button>
                                </div>
                                <button id="schedule-posts-btn" class="btn">Schedule Posts</button>
                            </div>
                             <div id="social-error-message" class="error-message hidden" aria-live="polite"></div>
                        </div>
            
                        <div id="social-scheduled-panel" class="studio-panel" role="tabpanel" aria-labelledby="social-tab-scheduled">
                            <div class="scheduled-header">
                                <h2>Scheduled Posts</h2>
                                <!-- View toggles can go here if needed -->
                            </div>
                            <div id="scheduled-posts-container">
                                <!-- Scheduled posts list will be inserted here -->
                            </div>
                        </div>
                    </section>
                </div>
            </div>

        </main>
    </div>

    <!-- Cropping Modal -->
    <div id="crop-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Edit Logo</h2>
            <div class="crop-container">
                <img id="image-to-crop" alt="Image cropper">
            </div>
            <div class="modal-actions">
                <button id="cancel-crop-btn" class="btn btn-secondary">Cancel</button>
                <button id="apply-crop-btn" class="btn">Apply</button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Share Design</h2>
            <div class="share-content">
                <img id="share-image-preview" alt="Design preview for sharing" loading="lazy" decoding="async">
                <div class="share-form">
                    <textarea id="share-caption-input" rows="6" placeholder="Write a caption..."></textarea>
                    <button id="generate-caption-btn" class="btn btn-secondary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3L9.5 9.5 3 12l6.5 2.5L12 21l2.5-6.5L21 12l-6.5-2.5L12 3z"/></svg>
                        <span>Generate Caption</span>
                    </button>
                    <div class="share-destinations">
                        <p>Click "Share Now" to send to apps like:</p>
                        <div class="share-icons">
                            <svg title="Facebook" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>
                            <svg title="X / Twitter" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                            <svg title="Instagram" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
                            <svg title="WhatsApp" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
                            <svg title="LinkedIn" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
                            <svg title="Email" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="cancel-share-btn" class="btn btn-secondary">Cancel</button>
                <button id="share-now-btn" class="btn">Share Now</button>
            </div>
        </div>
    </div>
    
    <!-- Business Manager Modal -->
    <div id="business-manager-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Manage Businesses</h2>
            <div id="business-list-container">
                <!-- Business list rendered here -->
            </div>
            <form id="business-form">
                <h3 class="form-grid-span-2">Add/Edit Business</h3>
                <input type="hidden" id="business-id-input">
                <div class="form-grid-span-2">
                    <label for="business-name-input">Business Name</label>
                    <input type="text" id="business-name-input" required>
                </div>
                <div>
                    <label for="business-social-general-input">General Website</label>
                    <input type="url" id="business-social-general-input" placeholder="https://example.com">
                </div>
                <div>
                    <label for="business-social-linkedin-input">LinkedIn URL</label>
                    <input type="url" id="business-social-linkedin-input" placeholder="https://linkedin.com/company/example">
                </div>
                <div>
                    <label for="business-social-twitter-input">X / Twitter URL</label>
                    <input type="url" id="business-social-twitter-input" placeholder="https://x.com/example">
                </div>
                <div>
                    <label for="business-social-instagram-input">Instagram URL</label>
                    <input type="url" id="business-social-instagram-input" placeholder="https://instagram.com/example">
                </div>
                <div>
                    <label for="business-social-facebook-input">Facebook URL</label>
                    <input type="url" id="business-social-facebook-input" placeholder="https://facebook.com/example">
                </div>
                <div>
                    <label for="business-social-reddit-input">Reddit Community URL</label>
                    <input type="url" id="business-social-reddit-input" placeholder="https://reddit.com/r/example">
                </div>
                <div class="modal-actions form-grid-span-2">
                    <button type="button" id="cancel-business-edit-btn" class="btn btn-secondary">Cancel</button>
                    <button type="submit" class="btn">Save Business</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Brainstorm Modal -->
    <div id="brainstorm-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Brainstorm Post Ideas</h2>
            <div id="brainstorm-results-container">
                 <!-- Results will be shown here -->
            </div>
            <div class="modal-actions">
                 <button id="close-brainstorm-btn" class="btn btn-secondary">Close</button>
                 <button id="generate-brainstorm-ideas-btn" class="btn">Generate Ideas</button>
            </div>
        </div>
    </div>

    <!-- Reply Generator Modal -->
    <div id="reply-generator-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Generate Replies</h2>
            <div class="reply-generator-content">
                <div class="reply-original-post">
                    <label>Original Post/Comment</label>
                    <textarea id="reply-original-text" rows="4" placeholder="Paste the comment you want to reply to..."></textarea>
                </div>
                <div class="reply-options">
                    <label for="reply-tone-select">Reply Tone</label>
                    <select id="reply-tone-select" class="format-select">
                        <option>Friendly</option>
                        <option>Professional</option>
                        <option>Humorous</option>
                        <option>Concise</option>
                        <option>Detailed</option>
                    </select>
                </div>
            </div>
            <div id="reply-results-container">
                <!-- Generated replies will appear here -->
            </div>
            <div class="modal-actions">
                <button id="close-reply-modal-btn" class="btn btn-secondary">Close</button>
                <button id="generate-reply-btn" class="btn">Generate</button>
            </div>
        </div>
    </div>

    <!-- Refine Post Modal -->
    <div id="refine-post-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>Refine Post</h2>
            <div class="refine-content">
                <div class="refine-original-post">
                    <label>Original Post</label>
                    <p id="refine-original-text"></p>
                </div>
                <div class="refine-actions">
                    <label>Refinement Instruction</label>
                    <div id="refine-actions-container" class="style-chips-container">
                        <button class="style-chip" data-instruction="Make it shorter">Make Shorter</button>
                        <button class="style-chip" data-instruction="Add relevant emojis">Add Emojis</button>
                        <button class="style-chip" data-instruction="Change the call to action">Change CTA</button>
                    </div>
                    <textarea id="refine-custom-instruction" rows="2" placeholder="Or type a custom instruction..."></textarea>
                </div>
            </div>
            <div class="modal-actions">
                <button id="cancel-refine-btn" class="btn btn-secondary">Cancel</button>
                <button id="refine-now-btn" class="btn">Refine Now</button>
            </div>
        </div>
    </div>
    
    <!-- Login/Signup Modal -->
    <div id="login-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-tabs">
                <button id="login-tab-btn" class="modal-tab-btn active">Login</button>
                <button id="signup-tab-btn" class="modal-tab-btn">Sign Up</button>
            </div>
            <div id="login-tab-content">
                <form id="login-form">
                    <h2>Login to Your Account</h2>
                    <div id="login-error-message" class="error-message hidden" aria-live="polite"></div>
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" id="forgot-password-link" class="link-btn">Forgot Password?</button>
                    </div>
                    <button type="submit" class="btn">Login</button>
                    <div class="divider">OR</div>
                    <button type="button" id="google-login-btn" class="btn btn-google">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="20px" height="20px"><path fill="#fbc02d" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12	s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20	s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#e53935" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039	l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4caf50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36	c-5.222,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"></path><path fill="#1565c0" d="M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574	l6.19,5.238C39.99,35.533,44,30.169,44,24C44,22.659,43.862,21.35,43.611,20.083z"></path></svg>
                        <span>Sign in with Google</span>
                    </button>
                </form>
            </div>
            <div id="signup-tab-content" class="hidden">
                <form id="signup-form">
                    <h2>Create an Account</h2>
                     <div id="signup-error-message" class="error-message hidden" aria-live="polite"></div>
                    <div class="form-group">
                        <label for="signup-name">Full Name</label>
                        <input type="text" id="signup-name" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-email">Email</label>
                        <input type="email" id="signup-email" required>
                    </div>
                    <div class="form-group">
                        <label for="signup-password">Password</label>
                        <input type="password" id="signup-password" required>
                    </div>
                    <button type="submit" class="btn">Sign Up</button>
                    <div class="divider">OR</div>
                    <button type="button" id="google-signup-btn" class="btn btn-google">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="20px" height="20px"><path fill="#fbc02d" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12	s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20	s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#e53935" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039	l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4caf50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36	c-5.222,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"></path><path fill="#1565c0" d="M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574	l6.19,5.238C39.99,35.533,44,30.169,44,24C44,22.659,43.862,21.35,43.611,20.083z"></path></svg>
                        <span>Sign up with Google</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- User Management Modal (Admin Only) -->
    <div id="user-management-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2>User Management</h2>
            <div id="user-management-list">
                <!-- User list will be rendered here -->
            </div>
            <div class="modal-actions">
                <button id="close-user-management-btn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

</body>
</html>